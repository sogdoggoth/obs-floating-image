<!DOCTYPE html>
<html lang="en">
    <head>
        <script src="config.js" type="text/javascript"></script>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <style>
            body{
                margin: 0;
                padding: 0;
                height: 100vh;
                width: 100vw;
            }

            .card{
                width: 120px;
                height: 50px;

                position: absolute;
                left: 50%;
                top: 40%;

                transform: translate(-50%, -50%);
            }
        </style>
    </head>

    <body>
        <div class="card">

        </div>
        <script>
            const card1 = document.querySelector('.card');

            //load the image

            let image = document.createElement("img");
            image.src = config.image.location;
            card1.appendChild(image);
            card1.width = image.width

            // calculate the center

            const center = {
                x: parseFloat(getComputedStyle(card1).left),
                y: parseFloat(getComputedStyle(card1).top)
            }

            
            let new_x = 0.0;
            let new_y = 0.0;
            let animated_value = 0.0;


            // These are the basic control for the up/down and left/right movement
            // Frequency /distance are multiplied to make the config easier to think about

            let x_distance = (config.horizontal.distance * 30) || 60

            let x_frequency = (config.horizontal.frequency/25) || 10;

            let y_distance = (config.vertical.distance * 30) || 60

            let y_frequency = (config.vertical.frequency/25) || 10;

            // This controls the behaviour of the movement

            let y_timing_offset = config.vertical.timing_offset * 1.5 || 0;
            let x_timing_offset = config.horizontal.timing_offset * 1.5

            let y_axis_offset = config.vertical.axis_offset *-1 || 0;
            let x_axis_offset = config.horizontal.axis_offset *-1 || 0;


            function startAnimation(){

                new_y = center.y - y_distance * Math.sin(animated_value * y_frequency + y_timing_offset) + y_axis_offset;
                new_x = center.x + x_distance * Math.sin(animated_value * x_frequency + x_timing_offset) + x_axis_offset;

                card1.style.top = `${new_y}px`;
                card1.style.left = `${new_x}px`;

                animated_value++;
                requestAnimationFrame(startAnimation);

            }

            window.onload = function() {
                startAnimation();
            }

        </script>
    </body>
</html>